generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Users {
  username String    @db.VarChar(120)
  password String    @db.VarChar(120)
  id       Int       @id @default(autoincrement())
  role     Int
  Records  Records[]
}

model Libraries {
  id      Int       @id @default(autoincrement())
  code    String    @db.VarChar(50)
  name    String    @db.VarChar(250)
  Records Records[]
}

model RecordTypes {
  id      Int       @id @default(autoincrement())
  name    String    @db.VarChar(50)
  Records Records[]
}

model Records {
  id          Int         @id @default(autoincrement())
  number      Int
  libraryId   Int
  authorName  String?     @db.VarChar(250)
  fly         Boolean
  typeId      Int
  recordType  RecordType?
  addedById   Int
  dateAdded   DateTime    @db.Date
  Users       Users       @relation(fields: [addedById], references: [id], onDelete: NoAction, onUpdate: NoAction)
  Libraries   Libraries   @relation(fields: [libraryId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  RecordTypes RecordTypes @relation(fields: [typeId], references: [id], onDelete: NoAction, onUpdate: NoAction)
}

model Tags {
  id   Int    @id @default(autoincrement())
  name String @db.VarChar(50)
}

enum Roles {
  Readonly
  User
  Admin
}

enum RecordType {
  Nuovo
  Modificato
  Copia
  Bonificato
}
